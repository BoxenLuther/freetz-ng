--- src/mod_openssl.c
+++ src/mod_openssl.c
@@ -3234,7 +3234,7 @@
 static int
 mod_openssl_ssl_conf_dhparameters(server *srv, plugin_config_socket *s, const buffer *dhparameters)
 {
-  #ifdef OPENSSL_NO_DH
+  #if defined(OPENSSL_NO_DH) || defined(OPENSSL_NO_BIO)
     if (dhparameters) {
         UNUSED(s);
         log_error(srv->errh, __FILE__, __LINE__,
